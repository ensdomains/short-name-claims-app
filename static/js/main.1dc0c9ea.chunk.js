(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{399:function(e,t,a){e.exports=a(903)},405:function(e,t,a){},680:function(e,t){},682:function(e,t){},716:function(e,t){},717:function(e,t){},901:function(e,t,a){},903:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(22),s=a.n(c),o=a(25),l=a.n(o),i=a(53),u=a(85),m=a(60),d=a(113),h=new(function(){function e(t){Object(u.a)(this,e),this.provider=void 0,this.provider=t}return Object(m.a)(e,[{key:"account",value:function(){var e=Object(i.a)(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ethereum.enable();case 2:if(void 0!==(t=e.sent)&&null!==t){e.next=5;break}return e.abrupt("return",t);case 5:return e.abrupt("return",t[0]);case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()}]),e}())(new d.ethers.providers.Web3Provider(ethereum)),p=r.a.createContext(h);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(405);var f=a(127),b=a(125),E=a(128),v=a(191),g=a(950),x=a(963),w=a(952),C=a(150),k=a(967),O=a(8),j=a(189),y=a(951),N=a(955),S=a(964),T=a(179),D=a.n(T),A=a(385),P=a(394),I=a(243),L=a.n(I),$=a(244),W=a(954),B=a(944),F=a(946),_=a(948),R=a(949),q=a(965),X=a(149),M=a.n(X),U=a(130),H=a.n(U),J=a(386),Y=/^a=0x[0-9a-fA-F]{40}$/,z=[{re:/^([^.]{3,6})\.[^.]+$/,method:"submitExactClaim"},{re:/^([^.]{3,6})eth\.[^.]+$/,method:"submitPrefixClaim"},{re:/^([^.]{1,4})\.([^.]{2})$/,method:"submitCombinedClaim"},{re:/^([^.]{1,3})\.([^.]{3})$/,method:"submitCombinedClaim"},{re:/^([^.]{1,2})\.([^.]{4})$/,method:"submitCombinedClaim"},{re:/^([^.])\.([^.]{5})$/,method:"submitCombinedClaim"}],G=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(f.a)(this,Object(b.a)(t).call(this,e))).fetchClaims=Object(i.a)(l.a.mark(function e(){var t,n,r,c,s,o,u;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props,n=t.claimer,r=t.name,e.next=3,n.priceOracle();case 3:return c=e.sent,s=new d.ethers.Contract(c,J.a,a.context.provider),e.next=7,n.REGISTRATION_PERIOD();case 7:return o=e.sent,e.next=10,Promise.all(z.map(function(){var e=Object(i.a)(l.a.mark(function e(t){var a,c,i,u,m,d;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.match(t.re)){e.next=3;break}return e.abrupt("return",void 0);case 3:return c=a.slice(1).join(""),e.t0=$.bigNumberify,e.next=7,s.price(c,0,o);case 7:return e.t1=e.sent,i=(0,e.t0)(e.t1),u="0x"+L.a.name.encode(r).toString("hex"),e.next=12,n.computeClaimId(c,u);case 12:return m=e.sent,e.next=15,n.claims(m);case 15:return d=e.sent,e.abrupt("return",{claimed:c,cost:i,method:t.method,submitted:!Object($.bigNumberify)(d[2]).isZero()});case 17:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 10:e.t0=function(e){return void 0!==e},u=e.sent.filter(e.t0),a.setState({claims:u});case 13:case"end":return e.stop()}},e)})),a.claimName=function(e){return Object(i.a)(l.a.mark(function t(){var n,r,c,s,o,i,u,m,d,h,p,f,b,E;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.context.account();case 2:return n=a.props,r=n.claimer,c=n.name,s=n.result,o=new D.a(a.context.provider._web3Provider),t.t0=o,t.next=7,r.oracle();case 7:return t.t1=t.sent,i=t.t0.getOracle.call(t.t0,t.t1),t.next=11,i.getAllProofs(s);case 11:return u=t.sent,m=Object(P.a)(u,2),d=m[0],h=m[1],p="0x"+L.a.name.encode(c).toString("hex"),f=e.cost.add(e.cost.div(10)),t.next=19,r[e.method](p,d,h,{value:f});case 19:return b=t.sent,E=b.hash.slice(0,6)+"\u2026"+b.hash.slice(62),a.setState({message:"Transaction "+E+" submitted"}),t.next=24,b.wait();case 24:return a.setState({message:"Transaction "+E+" mined!"}),t.next=27,a.fetchClaims();case 27:case"end":return t.stop()}},t)}))},a.handleClose=function(){a.setState({message:void 0})},a.state={},a}return Object(E.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(i.a)(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchClaims();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props,a=t.name,n=t.result,c=t.classes,s=this.state,o=s.claims,l=s.message,i=!1;n.found&&(i=n.results[n.results.length-1].rrs.some(function(e){return"TXT"===e.type&&e.data.some(function(e){return Y.test(e)})}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(B.a,{component:"ul"},r.a.createElement(F.a,null,n.found||n.nsec?r.a.createElement(_.a,null,r.a.createElement(M.a,null)):r.a.createElement(_.a,null,r.a.createElement(H.a,null)),r.a.createElement(R.a,{primary:"DNSSEC enabled",secondary:n.found||n.nsec?"":"Your domain must be DNSSEC-enabled, using a supported algorithm. See this page for details."})),r.a.createElement(F.a,null,n.found?r.a.createElement(_.a,null,r.a.createElement(M.a,null)):r.a.createElement(_.a,null,r.a.createElement(H.a,null)),r.a.createElement(R.a,{primary:"Text record on _ens."+a,secondary:n.found?"":"You must publish a TXT record on _ens."+a+", in the format 'a=0x...', specifying the address you want to own the ENS name."})),r.a.createElement(F.a,null,i?r.a.createElement(_.a,null,r.a.createElement(M.a,null)):r.a.createElement(_.a,null,r.a.createElement(H.a,null)),r.a.createElement(R.a,null,"Text record in correct format (`a=0x...`)")),o?"":r.a.createElement(g.a,{className:c.progress}),o&&o.map(function(t){return r.a.createElement(F.a,{key:t.claimed},r.a.createElement(_.a,null,t.submitted?r.a.createElement(M.a,null):r.a.createElement(H.a,null)),r.a.createElement(R.a,null,"Claimed ",t.claimed,".eth for ",d.ethers.utils.formatEther(t.cost)," ETH",t.submitted?"":r.a.createElement(y.a,{variant:"contained",color:"primary",className:c.button,onClick:e.claimName(t),disabled:!n.found},"Claim")))})),r.a.createElement(q.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:void 0!==l,autoHideDuration:6e3,onClose:this.handleClose,message:l,action:[r.a.createElement(W.a,{key:"close","aria-label":"Close",color:"inherit",onClick:this.handleClose},r.a.createElement(H.a,null))]}))}}]),t}(r.a.Component);G.contextType=p;var K,Z=Object(O.a)(function(e){return Object(k.a)({button:{margin:e.spacing(1)},progress:{margin:e.spacing(2)}})})(G),Q=/^([^.]{3,6}\.[^.]+|[^.]{3,6}eth\.[^.]+|[^.]{1,4}\.[^.]{2}|[^.]{1,3}\.[^.]{3}|[^.]{1,2}\.[^.]{4}|[^.]{1}\.[^.]{5})$/;!function(e){e[e.Initial=1]="Initial",e[e.Loading=2]="Loading",e[e.Loaded=3]="Loaded"}(K||(K={}));var V=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(f.a)(this,Object(b.a)(t).call(this,e))).prover=void 0,a.claimer=void 0,a.handleChange=function(e){a.setState({name:e.target.value,status:K.Initial})},a.handleCheck=function(e){return a.doCheck()},a.doCheck=Object(i.a)(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a.prover&&a.claimer){e.next=2;break}return e.abrupt("return");case 2:return a.setState({status:K.Loading}),e.prev=3,e.next=6,a.prover.lookup("TXT","_ens."+a.state.name);case 6:t=e.sent,a.setState({status:K.Loaded,result:t}),e.next=16;break;case 10:if(e.prev=10,e.t0=e.catch(3),console.log(e.t0),"string"===typeof e.t0&&e.t0.endsWith("NOT SUPPORTED")){e.next=15;break}throw e.t0;case 15:a.setState({status:K.Loaded,result:{found:!1,nsec:!1,results:[],proofs:[]}});case 16:case"end":return e.stop()}},e,null,[[3,10]])})),a.handleClear=function(){var e=Object(i.a)(l.a.mark(function e(t){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.setState({status:K.Initial,name:""});case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.state={name:"",status:K.Initial},a}return Object(E.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(i.a)(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.prover=new D.a(this.context.provider._web3Provider),this.claimer=new d.ethers.Contract(this.props.address,A.a,this.context.provider.getSigner());case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,n=a.name,c=a.status,s=a.result;return r.a.createElement(N.a,{container:!0,spacing:3},r.a.createElement(N.a,{item:!0,xs:9},r.a.createElement(S.a,{autoFocus:!0,label:"Name to claim",className:t.textField,value:n,onKeyPress:function(t){return"Enter"===t.key&&e.doCheck()},onChange:this.handleChange})),r.a.createElement(N.a,{item:!0,xs:3},r.a.createElement(y.a,{variant:"contained",color:"primary",className:t.button,onClick:this.handleCheck,disabled:!Q.test(n)},"Check"),r.a.createElement(y.a,{variant:"contained",color:"default",className:t.button,onClick:this.handleClear},"Clear")),c===K.Loading&&r.a.createElement(N.a,{item:!0,xs:12},r.a.createElement(g.a,{className:t.progress})),c===K.Loaded&&s&&this.claimer&&r.a.createElement(Z,{name:n,claimer:this.claimer,result:s}))}}]),t}(r.a.Component);V.contextType=p;var ee=Object(O.a)(function(e){return Object(k.a)({textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:"100%"},button:{margin:e.spacing(1)},progress:{margin:e.spacing(2)}})})(V),te=a(389),ae=a(956),ne=a(962),re=a(957),ce=a(961),se=a(960),oe=a(958),le=a(959);function ie(){var e=Object(te.a)(["\n  {\n    claims(orderBy: name) {\n      id\n      name\n      dnsName\n      owner\n      approved\n      submittedAt\n    }\n  }\n"]);return ie=function(){return e},e}var ue=Object(ae.a)(function(e){return Object(k.a)({root:{width:"100%",marginTop:e.spacing(3),overflowX:"auto"},table:{minWidth:650}})}),me=Object(v.b)(ie()),de=function(e){var t=ue(),a=e.exploreUrl;return r.a.createElement(j.b,{query:me},function(e){return e.loading?r.a.createElement(g.a,null):e.error?r.a.createElement("div",null,"Error loading list of claims."):r.a.createElement(re.a,{className:t.table},r.a.createElement(oe.a,null,r.a.createElement(le.a,null,r.a.createElement(se.a,null,"Name"),r.a.createElement(se.a,null,"DNS Domain"),r.a.createElement(se.a,null,"Submitted"),r.a.createElement(se.a,null,"Account"))),r.a.createElement(ce.a,null,e.data.claims.map(function(e){return r.a.createElement(le.a,null,r.a.createElement(se.a,null,e.name,".eth"),r.a.createElement(se.a,null,e.dnsName),r.a.createElement(se.a,null,new Date(1e3*e.submittedAt).toLocaleDateString()),r.a.createElement(se.a,null,r.a.createElement(ne.a,{href:a+e.owner},e.owner.slice(0,6)+"\u2026"+e.owner.slice(38))))})))})},he=(a(901),{3:{nameClaimAddress:"0xd5be10a138550bd8b53b986af2e45901f377e2bb",graphql:"https://api.thegraph.com/subgraphs/name/ensdomains/shortnameclaims",etherscan:"https://ropsten.etherscan.io/address/"},5:{nameClaimAddress:"0x4ef2aadfda4f0e1f54752953f5f90010ac9e6e40",etherscan:"https://goerli.etherscan.io/address/"},1558996169577:{nameClaimAddress:"0x6eD79Aa1c71FD7BdBC515EfdA3Bd4e26394435cC",etherscan:""}}),pe=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(f.a)(this,Object(b.a)(t).call(this,e))).state={},a}return Object(E.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(i.a)(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,this.context.provider.getNetwork();case 3:e.t1=e.sent,e.t2={network:e.t1},e.t0.setState.call(e.t0,e.t2);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.classes,t=this.state.network;if(!t)return r.a.createElement(x.a,{maxWidth:"md"},r.a.createElement("h1",null,"ENS Short Name Claim Tool"),r.a.createElement(g.a,null));var a=t?he[t.chainId]:null;if(!a)return r.a.createElement(x.a,{maxWidth:"md"},r.a.createElement("h1",null,"ENS Short Name Claim Tool"),r.a.createElement(w.a,null,r.a.createElement(C.a,{variant:"h2",component:"h1"},"Network Not Supported"),r.a.createElement(C.a,{variant:"body1"},"The network your browser is connected to is not supported. Please connect to a supported network.")));var n=a.graphql?new v.a({uri:a.graphql}):null;return r.a.createElement(x.a,{maxWidth:"md",className:e.root},r.a.createElement("h1",null,"ENS Short Name Claim Tool"),r.a.createElement(w.a,{className:e.paper},r.a.createElement("h2",null,"Submit a claim"),r.a.createElement(ee,{address:a.nameClaimAddress})),n&&r.a.createElement(w.a,{className:e.paper},r.a.createElement("h2",null,"Claims"),r.a.createElement(j.a,{client:n},r.a.createElement(de,{address:a.nameClaimAddress,exploreUrl:a.etherscan}))))}}]),t}(r.a.Component);pe.contextType=p;var fe=Object(O.a)(function(e){return Object(k.a)({root:{},paper:{margin:e.spacing(1),padding:e.spacing(1)}})})(pe);s.a.render(r.a.createElement(p.Provider,{value:h},r.a.createElement(fe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[399,1,2]]]);
//# sourceMappingURL=main.1dc0c9ea.chunk.js.map