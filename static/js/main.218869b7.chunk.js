(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{373:function(e,t,a){e.exports=a(873)},379:function(e,t,a){},654:function(e,t){},656:function(e,t){},690:function(e,t){},691:function(e,t){},872:function(e,t,a){},873:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(19),o=a.n(c),s=a(22),i=a.n(s),l=a(46),u=a(78),m=a(53),d=a(105),h=new(function(){function e(t){Object(u.a)(this,e),this.provider=void 0,this.provider=t}return Object(m.a)(e,[{key:"account",value:function(){var e=Object(l.a)(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ethereum.enable();case 2:if(void 0!==(t=e.sent)&&null!==t){e.next=5;break}return e.abrupt("return",t);case 5:return e.abrupt("return",t[0]);case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()}]),e}())(new d.ethers.providers.Web3Provider(ethereum)),p=r.a.createContext(h);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(379);var f=a(118),b=a(116),v=a(117),E=a(913),x=a(919),g=a(915),C=a(175),w=a(914),k=a(918),O=a(920),y=a(923),j=a(5),S=a(167),N=a.n(S),T=a(365),P=a(369),I=a(225),D=a.n(I),L=a(226),$=a(917),A=a(907),F=a(909),_=a(911),B=a(912),R=a(921),W=a(137),M=a.n(W),X=a(120),H=a.n(X),J=a(366),Y=/^a=0x[0-9a-fA-F]{40}$/,z=[{re:/^([^.]{3,6})\.[^.]+$/,method:"submitExactClaim"},{re:/^([^.]{3,6})eth\.[^.]+$/,method:"submitPrefixClaim"},{re:/^([^.]{1,4})\.([^.]{2})$/,method:"submitCombinedClaim"},{re:/^([^.]{1,3})\.([^.]{3})$/,method:"submitCombinedClaim"},{re:/^([^.]{1,2})\.([^.]{4})$/,method:"submitCombinedClaim"},{re:/^([^.])\.([^.]{5})$/,method:"submitCombinedClaim"}],G=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(f.a)(this,Object(b.a)(t).call(this,e))).fetchClaims=Object(l.a)(i.a.mark(function e(){var t,n,r,c,o,s,u;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props,n=t.claimer,r=t.name,e.next=3,n.priceOracle();case 3:return c=e.sent,o=new d.ethers.Contract(c,J.a,a.context.provider),e.next=7,n.REGISTRATION_PERIOD();case 7:return s=e.sent,e.next=10,Promise.all(z.map(function(){var e=Object(l.a)(i.a.mark(function e(t){var a,c,l,u,m,d;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.match(t.re)){e.next=3;break}return e.abrupt("return",void 0);case 3:return c=a.slice(1).join(""),e.t0=L.bigNumberify,e.next=7,o.price(c,0,s);case 7:return e.t1=e.sent,l=(0,e.t0)(e.t1),u="0x"+D.a.name.encode(r).toString("hex"),e.next=12,n.computeClaimId(c,u);case 12:return m=e.sent,e.next=15,n.claims(m);case 15:return d=e.sent,e.abrupt("return",{claimed:c,cost:l,method:t.method,submitted:!Object(L.bigNumberify)(d[2]).isZero()});case 17:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 10:e.t0=function(e){return void 0!==e},u=e.sent.filter(e.t0),a.setState({claims:u});case 13:case"end":return e.stop()}},e)})),a.claimName=function(e){return Object(l.a)(i.a.mark(function t(){var n,r,c,o,s,l,u,m,d,h,p,f,b,v;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.context.account();case 2:return n=a.props,r=n.claimer,c=n.name,o=n.result,s=new N.a(a.context.provider._web3Provider),t.t0=s,t.next=7,r.oracle();case 7:return t.t1=t.sent,l=t.t0.getOracle.call(t.t0,t.t1),t.next=11,l.getAllProofs(o);case 11:return u=t.sent,m=Object(P.a)(u,2),d=m[0],h=m[1],p="0x"+D.a.name.encode(c).toString("hex"),f=e.cost.add(e.cost.div(10)),t.next=19,r[e.method](p,d,h,{value:f});case 19:return b=t.sent,v=b.hash.slice(0,6)+"\u2026"+b.hash.slice(62),a.setState({message:"Transaction "+v+" submitted"}),t.next=24,b.wait();case 24:return a.setState({message:"Transaction "+v+" mined!"}),t.next=27,a.fetchClaims();case 27:case"end":return t.stop()}},t)}))},a.handleClose=function(){a.setState({message:void 0})},a.state={},a}return Object(v.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(l.a)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchClaims();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props,a=t.name,n=t.result,c=t.classes,o=this.state,s=o.claims,i=o.message,l=!1;n.found&&(l=n.results[n.results.length-1].rrs.some(function(e){return"TXT"===e.type&&e.data.some(function(e){return Y.test(e)})}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(A.a,{component:"ul"},r.a.createElement(F.a,null,n.found||n.nsec?r.a.createElement(_.a,null,r.a.createElement(M.a,null)):r.a.createElement(_.a,null,r.a.createElement(H.a,null)),r.a.createElement(B.a,{primary:"DNSSEC enabled",secondary:n.found||n.nsec?"":"Your domain must be DNSSEC-enabled, using a supported algorithm. See this page for details."})),r.a.createElement(F.a,null,n.found?r.a.createElement(_.a,null,r.a.createElement(M.a,null)):r.a.createElement(_.a,null,r.a.createElement(H.a,null)),r.a.createElement(B.a,{primary:"Text record on _ens."+a,secondary:n.found?"":"You must publish a TXT record on _ens."+a+", in the format 'a=0x...', specifying the address you want to own the ENS name."})),r.a.createElement(F.a,null,l?r.a.createElement(_.a,null,r.a.createElement(M.a,null)):r.a.createElement(_.a,null,r.a.createElement(H.a,null)),r.a.createElement(B.a,null,"Text record in correct format (`a=0x...`)")),s?"":r.a.createElement(E.a,{className:c.progress}),s&&s.map(function(t){return r.a.createElement(F.a,{key:t.claimed},r.a.createElement(_.a,null,t.submitted?r.a.createElement(M.a,null):r.a.createElement(H.a,null)),r.a.createElement(B.a,null,"Claimed ",t.claimed,".eth for ",d.ethers.utils.formatEther(t.cost)," ETH",t.submitted?"":r.a.createElement(w.a,{variant:"contained",color:"primary",className:c.button,onClick:e.claimName(t),disabled:!n.found},"Claim")))})),r.a.createElement(R.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:void 0!==i,autoHideDuration:6e3,onClose:this.handleClose,message:i,action:[r.a.createElement($.a,{key:"close","aria-label":"Close",color:"inherit",onClick:this.handleClose},r.a.createElement(H.a,null))]}))}}]),t}(r.a.Component);G.contextType=p;var K,U=Object(j.a)(function(e){return Object(y.a)({button:{margin:e.spacing(1)},progress:{margin:e.spacing(2)}})})(G),Z=/^([^.]{3,6}\.[^.]+|[^.]{3,6}eth\.[^.]+|[^.]{1,4}\.[^.]{2}|[^.]{1,3}\.[^.]{3}|[^.]{1,2}\.[^.]{4}|[^.]{1}\.[^.]{5})$/;!function(e){e[e.Initial=1]="Initial",e[e.Loading=2]="Loading",e[e.Loaded=3]="Loaded"}(K||(K={}));var q=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(f.a)(this,Object(b.a)(t).call(this,e))).prover=void 0,a.claimer=void 0,a.handleChange=function(e){a.setState({name:e.target.value,status:K.Initial})},a.handleCheck=function(e){return a.doCheck()},a.doCheck=Object(l.a)(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a.prover&&a.claimer){e.next=2;break}return e.abrupt("return");case 2:return a.setState({status:K.Loading}),e.prev=3,e.next=6,a.prover.lookup("TXT","_ens."+a.state.name);case 6:t=e.sent,a.setState({status:K.Loaded,result:t}),e.next=15;break;case 10:if(e.prev=10,e.t0=e.catch(3),"string"===typeof e.t0&&e.t0.endsWith("NOT SUPPORTED")){e.next=14;break}throw e.t0;case 14:a.setState({status:K.Loaded,result:{found:!1,nsec:!1,results:[],proofs:[]}});case 15:case"end":return e.stop()}},e,null,[[3,10]])})),a.handleClear=function(){var e=Object(l.a)(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.setState({status:K.Initial,name:""});case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.state={name:"",status:K.Initial},a}return Object(v.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(l.a)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.prover=new N.a(this.context.provider._web3Provider),this.claimer=new d.ethers.Contract(this.props.address,T.a,this.context.provider.getSigner());case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,n=a.name,c=a.status,o=a.result;return r.a.createElement(k.a,{container:!0,spacing:3,className:t.root},r.a.createElement(k.a,{item:!0,xs:9},r.a.createElement(O.a,{autoFocus:!0,label:"Name to claim",className:t.textField,value:n,onKeyPress:function(t){return"Enter"===t.key&&e.doCheck()},onChange:this.handleChange})),r.a.createElement(k.a,{item:!0,xs:3},r.a.createElement(w.a,{variant:"contained",color:"primary",className:t.button,onClick:this.handleCheck,disabled:!Z.test(n)},"Check"),r.a.createElement(w.a,{variant:"contained",color:"default",className:t.button,onClick:this.handleClear},"Clear")),c===K.Loading&&r.a.createElement(k.a,{item:!0,xs:12},r.a.createElement(E.a,{className:t.progress})),c===K.Loaded&&o&&this.claimer&&r.a.createElement(U,{name:n,claimer:this.claimer,result:o}))}}]),t}(r.a.Component);q.contextType=p;var Q=Object(j.a)(function(e){return Object(y.a)({textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:"100%"},button:{margin:e.spacing(1)},root:{padding:e.spacing(1)},progress:{margin:e.spacing(2)}})})(q),V=(a(872),{5:{nameClaimAddress:"0x4ef2aadfda4f0e1f54752953f5f90010ac9e6e40"},1558996169577:{nameClaimAddress:"0x6eD79Aa1c71FD7BdBC515EfdA3Bd4e26394435cC"}}),ee=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(f.a)(this,Object(b.a)(t).call(this,e))).state={},a}return Object(v.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(l.a)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,this.context.provider.getNetwork();case 3:e.t1=e.sent,e.t2={network:e.t1},e.t0.setState.call(e.t0,e.t2);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.network,t=e?V[e.chainId]:null;return r.a.createElement(x.a,{maxWidth:"md"},r.a.createElement("h1",null,"ENS Short Name Claim Tool"),!e&&r.a.createElement(E.a,null),e&&!t&&r.a.createElement(g.a,null,r.a.createElement(C.a,{variant:"h2",component:"h1"},"Network Not Supported"),r.a.createElement(C.a,{variant:"body1"},"The network your browser is connected to is not supported. Please connect to a supported network.")),e&&t&&r.a.createElement(g.a,null,r.a.createElement(Q,{address:t.nameClaimAddress})))}}]),t}(r.a.Component);ee.contextType=p;var te=ee;o.a.render(r.a.createElement(p.Provider,{value:h},r.a.createElement(te,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[373,1,2]]]);
//# sourceMappingURL=main.218869b7.chunk.js.map