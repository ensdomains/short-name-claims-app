(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{399:function(e,t,a){e.exports=a(903)},405:function(e,t,a){},680:function(e,t){},682:function(e,t){},716:function(e,t){},717:function(e,t){},901:function(e,t,a){},903:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(22),o=a.n(c),s=a(25),i=a.n(s),l=a(53),u=a(85),m=a(60),d=a(113),h=new(function(){function e(t){Object(u.a)(this,e),this.provider=void 0,this.provider=t}return Object(m.a)(e,[{key:"account",value:function(){var e=Object(l.a)(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ethereum.enable();case 2:if(void 0!==(t=e.sent)&&null!==t){e.next=5;break}return e.abrupt("return",t);case 5:return e.abrupt("return",t[0]);case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()}]),e}())(new d.ethers.providers.Web3Provider(ethereum)),p=r.a.createContext(h);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(405);var f=a(127),b=a(125),E=a(128),v=a(190),g=a(949),x=a(961),w=a(951),C=a(191),k=a(965),O=a(8),j=a(188),y=a(950),N=a(954),S=a(962),T=a(178),D=a.n(T),A=a(385),P=a(394),I=a(242),L=a.n(I),$=a(243),W=a(953),B=a(943),F=a(945),_=a(947),R=a(948),q=a(963),X=a(149),M=a.n(X),H=a(130),J=a.n(H),Y=a(386),z=/^a=0x[0-9a-fA-F]{40}$/,G=[{re:/^([^.]{3,6})\.[^.]+$/,method:"submitExactClaim"},{re:/^([^.]{3,6})eth\.[^.]+$/,method:"submitPrefixClaim"},{re:/^([^.]{1,4})\.([^.]{2})$/,method:"submitCombinedClaim"},{re:/^([^.]{1,3})\.([^.]{3})$/,method:"submitCombinedClaim"},{re:/^([^.]{1,2})\.([^.]{4})$/,method:"submitCombinedClaim"},{re:/^([^.])\.([^.]{5})$/,method:"submitCombinedClaim"}],K=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(f.a)(this,Object(b.a)(t).call(this,e))).fetchClaims=Object(l.a)(i.a.mark(function e(){var t,n,r,c,o,s,u;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props,n=t.claimer,r=t.name,e.next=3,n.priceOracle();case 3:return c=e.sent,o=new d.ethers.Contract(c,Y.a,a.context.provider),e.next=7,n.REGISTRATION_PERIOD();case 7:return s=e.sent,e.next=10,Promise.all(G.map(function(){var e=Object(l.a)(i.a.mark(function e(t){var a,c,l,u,m,d;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.match(t.re)){e.next=3;break}return e.abrupt("return",void 0);case 3:return c=a.slice(1).join(""),e.t0=$.bigNumberify,e.next=7,o.price(c,0,s);case 7:return e.t1=e.sent,l=(0,e.t0)(e.t1),u="0x"+L.a.name.encode(r).toString("hex"),e.next=12,n.computeClaimId(c,u);case 12:return m=e.sent,e.next=15,n.claims(m);case 15:return d=e.sent,e.abrupt("return",{claimed:c,cost:l,method:t.method,submitted:!Object($.bigNumberify)(d[2]).isZero()});case 17:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 10:e.t0=function(e){return void 0!==e},u=e.sent.filter(e.t0),a.setState({claims:u});case 13:case"end":return e.stop()}},e)})),a.claimName=function(e){return Object(l.a)(i.a.mark(function t(){var n,r,c,o,s,l,u,m,d,h,p,f,b,E;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.context.account();case 2:return n=a.props,r=n.claimer,c=n.name,o=n.result,s=new D.a(a.context.provider._web3Provider),t.t0=s,t.next=7,r.oracle();case 7:return t.t1=t.sent,l=t.t0.getOracle.call(t.t0,t.t1),t.next=11,l.getAllProofs(o);case 11:return u=t.sent,m=Object(P.a)(u,2),d=m[0],h=m[1],p="0x"+L.a.name.encode(c).toString("hex"),f=e.cost.add(e.cost.div(10)),t.next=19,r[e.method](p,d,h,{value:f});case 19:return b=t.sent,E=b.hash.slice(0,6)+"\u2026"+b.hash.slice(62),a.setState({message:"Transaction "+E+" submitted"}),t.next=24,b.wait();case 24:return a.setState({message:"Transaction "+E+" mined!"}),t.next=27,a.fetchClaims();case 27:case"end":return t.stop()}},t)}))},a.handleClose=function(){a.setState({message:void 0})},a.state={},a}return Object(E.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(l.a)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchClaims();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props,a=t.name,n=t.result,c=t.classes,o=this.state,s=o.claims,i=o.message,l=!1;n.found&&(l=n.results[n.results.length-1].rrs.some(function(e){return"TXT"===e.type&&e.data.some(function(e){return z.test(e)})}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(B.a,{component:"ul"},r.a.createElement(F.a,null,n.found||n.nsec?r.a.createElement(_.a,null,r.a.createElement(M.a,null)):r.a.createElement(_.a,null,r.a.createElement(J.a,null)),r.a.createElement(R.a,{primary:"DNSSEC enabled",secondary:n.found||n.nsec?"":"Your domain must be DNSSEC-enabled, using a supported algorithm. See this page for details."})),r.a.createElement(F.a,null,n.found?r.a.createElement(_.a,null,r.a.createElement(M.a,null)):r.a.createElement(_.a,null,r.a.createElement(J.a,null)),r.a.createElement(R.a,{primary:"Text record on _ens."+a,secondary:n.found?"":"You must publish a TXT record on _ens."+a+", in the format 'a=0x...', specifying the address you want to own the ENS name."})),r.a.createElement(F.a,null,l?r.a.createElement(_.a,null,r.a.createElement(M.a,null)):r.a.createElement(_.a,null,r.a.createElement(J.a,null)),r.a.createElement(R.a,null,"Text record in correct format (`a=0x...`)")),s?"":r.a.createElement(g.a,{className:c.progress}),s&&s.map(function(t){return r.a.createElement(F.a,{key:t.claimed},r.a.createElement(_.a,null,t.submitted?r.a.createElement(M.a,null):r.a.createElement(J.a,null)),r.a.createElement(R.a,null,"Claimed ",t.claimed,".eth for ",d.ethers.utils.formatEther(t.cost)," ETH",t.submitted?"":r.a.createElement(y.a,{variant:"contained",color:"primary",className:c.button,onClick:e.claimName(t),disabled:!n.found},"Claim")))})),r.a.createElement(q.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:void 0!==i,autoHideDuration:6e3,onClose:this.handleClose,message:i,action:[r.a.createElement(W.a,{key:"close","aria-label":"Close",color:"inherit",onClick:this.handleClose},r.a.createElement(J.a,null))]}))}}]),t}(r.a.Component);K.contextType=p;var U,Z=Object(O.a)(function(e){return Object(k.a)({button:{margin:e.spacing(1)},progress:{margin:e.spacing(2)}})})(K),Q=/^([^.]{3,6}\.[^.]+|[^.]{3,6}eth\.[^.]+|[^.]{1,4}\.[^.]{2}|[^.]{1,3}\.[^.]{3}|[^.]{1,2}\.[^.]{4}|[^.]{1}\.[^.]{5})$/;!function(e){e[e.Initial=1]="Initial",e[e.Loading=2]="Loading",e[e.Loaded=3]="Loaded"}(U||(U={}));var V=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(f.a)(this,Object(b.a)(t).call(this,e))).prover=void 0,a.claimer=void 0,a.handleChange=function(e){a.setState({name:e.target.value,status:U.Initial})},a.handleCheck=function(e){return a.doCheck()},a.doCheck=Object(l.a)(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a.prover&&a.claimer){e.next=2;break}return e.abrupt("return");case 2:return a.setState({status:U.Loading}),e.prev=3,e.next=6,a.prover.lookup("TXT","_ens."+a.state.name);case 6:t=e.sent,a.setState({status:U.Loaded,result:t}),e.next=16;break;case 10:if(e.prev=10,e.t0=e.catch(3),console.log(e.t0),"string"===typeof e.t0&&e.t0.endsWith("NOT SUPPORTED")){e.next=15;break}throw e.t0;case 15:a.setState({status:U.Loaded,result:{found:!1,nsec:!1,results:[],proofs:[]}});case 16:case"end":return e.stop()}},e,null,[[3,10]])})),a.handleClear=function(){var e=Object(l.a)(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.setState({status:U.Initial,name:""});case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.state={name:"",status:U.Initial},a}return Object(E.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(l.a)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.prover=new D.a(this.context.provider._web3Provider),this.claimer=new d.ethers.Contract(this.props.address,A.a,this.context.provider.getSigner());case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,n=a.name,c=a.status,o=a.result;return r.a.createElement(N.a,{container:!0,spacing:3},r.a.createElement(N.a,{item:!0,xs:9},r.a.createElement(S.a,{autoFocus:!0,label:"Name to claim",className:t.textField,value:n,onKeyPress:function(t){return"Enter"===t.key&&e.doCheck()},onChange:this.handleChange})),r.a.createElement(N.a,{item:!0,xs:3},r.a.createElement(y.a,{variant:"contained",color:"primary",className:t.button,onClick:this.handleCheck,disabled:!Q.test(n)},"Check"),r.a.createElement(y.a,{variant:"contained",color:"default",className:t.button,onClick:this.handleClear},"Clear")),c===U.Loading&&r.a.createElement(N.a,{item:!0,xs:12},r.a.createElement(g.a,{className:t.progress})),c===U.Loaded&&o&&this.claimer&&r.a.createElement(Z,{name:n,claimer:this.claimer,result:o}))}}]),t}(r.a.Component);V.contextType=p;var ee=Object(O.a)(function(e){return Object(k.a)({textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:"100%"},button:{margin:e.spacing(1)},progress:{margin:e.spacing(2)}})})(V),te=a(389),ae=a(955),ne=a(956),re=a(960),ce=a(959),oe=a(957),se=a(958);function ie(){var e=Object(te.a)(["\n  {\n    claims(orderBy: name) {\n      id\n      name\n      dnsName\n      owner\n      approved\n      submittedAt\n    }\n  }\n"]);return ie=function(){return e},e}var le=Object(ae.a)(function(e){return Object(k.a)({root:{width:"100%",marginTop:e.spacing(3),overflowX:"auto"},table:{minWidth:650}})}),ue=Object(v.b)(ie()),me=function(e){var t=le();return r.a.createElement(j.b,{query:ue},function(e){return e.loading?r.a.createElement(g.a,null):e.error?r.a.createElement("div",null,"Error loading list of claims."):r.a.createElement(ne.a,{className:t.table},r.a.createElement(oe.a,null,r.a.createElement(se.a,null,r.a.createElement(ce.a,null,"Name"),r.a.createElement(ce.a,null,"DNS Domain"),r.a.createElement(ce.a,null,"Submitted"),r.a.createElement(ce.a,null,"Account"))),r.a.createElement(re.a,null,e.data.claims.map(function(e){return r.a.createElement(se.a,null,r.a.createElement(ce.a,null,e.name,".eth"),r.a.createElement(ce.a,null,e.dnsName),r.a.createElement(ce.a,null,new Date(1e3*e.submittedAt).toLocaleDateString()),r.a.createElement(ce.a,null,e.owner))})))})},de=(a(901),{3:{nameClaimAddress:"0xd5be10a138550bd8b53b986af2e45901f377e2bb",graphql:"https://api.thegraph.com/subgraphs/name/ensdomains/shortnameclaims"},5:{nameClaimAddress:"0x4ef2aadfda4f0e1f54752953f5f90010ac9e6e40"},1558996169577:{nameClaimAddress:"0x6eD79Aa1c71FD7BdBC515EfdA3Bd4e26394435cC"}}),he=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(f.a)(this,Object(b.a)(t).call(this,e))).state={},a}return Object(E.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(l.a)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,this.context.provider.getNetwork();case 3:e.t1=e.sent,e.t2={network:e.t1},e.t0.setState.call(e.t0,e.t2);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.classes,t=this.state.network;if(!t)return r.a.createElement(x.a,{maxWidth:"md"},r.a.createElement("h1",null,"ENS Short Name Claim Tool"),r.a.createElement(g.a,null));var a=t?de[t.chainId]:null;if(!a)return r.a.createElement(x.a,{maxWidth:"md"},r.a.createElement("h1",null,"ENS Short Name Claim Tool"),r.a.createElement(w.a,null,r.a.createElement(C.a,{variant:"h2",component:"h1"},"Network Not Supported"),r.a.createElement(C.a,{variant:"body1"},"The network your browser is connected to is not supported. Please connect to a supported network.")));var n=a.graphql?new v.a({uri:a.graphql}):null;return r.a.createElement(x.a,{maxWidth:"md",className:e.root},r.a.createElement("h1",null,"ENS Short Name Claim Tool"),r.a.createElement(w.a,{className:e.paper},r.a.createElement("h2",null,"Submit a claim"),r.a.createElement(ee,{address:a.nameClaimAddress})),n&&r.a.createElement(w.a,{className:e.paper},r.a.createElement("h2",null,"Claims"),r.a.createElement(j.a,{client:n},r.a.createElement(me,{address:a.nameClaimAddress}))))}}]),t}(r.a.Component);he.contextType=p;var pe=Object(O.a)(function(e){return Object(k.a)({root:{},paper:{margin:e.spacing(1),padding:e.spacing(1)}})})(he);o.a.render(r.a.createElement(p.Provider,{value:h},r.a.createElement(pe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[399,1,2]]]);
//# sourceMappingURL=main.8419a08f.chunk.js.map